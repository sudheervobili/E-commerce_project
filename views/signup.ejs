<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/css/signup.css" />
    <title>Signup page</title>
</head>
<body>
    <div class="main">
		<div class="leftimage">
			<img src="/images/grocery.png" alt="grocery">
		</div>
		<div class="signup-form">
			<h2>Sign-Up</h2>
			<% if(emailexists) { %>
				<p style="color: red;">Email already exist !</p>
			<% } %>
			<% if(mobileexists) { %>
				<p style="color: red;">Mobile already exist !</p>
			<% } %>
			<form id="signup-form" action="/signup" method="post" onsubmit="return validateForm()">
				<div class="input-box">
					<input
						type="text"
						name="name"
						id="name"
						placeholder="Name"
						required
					/>
				</div>
				<div class="input-box">
					<input
						type="email"
						name="email"
						id="email"
						placeholder="E-mail"
						required
					/>
				</div>
				<div class="input-box">
					<input
						type="text"
						name="mobile"
						id="mobile"
						placeholder="Mobile Number"
						required
					/>
				</div>
				<div class="input-box">
					<input
						type="text"
						name="address"
						id="address"
						placeholder="Address"
						required
					/>
				</div>
				<div class="input-box">
					<div class="password-input">
						<input
							type="password"
							name="password"
							id="password"
							placeholder="password"
							required
						/>
						<span class="toggle-password" onclick="togglePasswordVisibility('password')">
							<img src="/images/eye-slash-icon.png" alt="Toggle password visibility" />
						</span>
					</div>
				</div>
				<div class="input-box">
					<div class="password-input">
						<input
							type="password"
							name="confirm_password"
							id="confirm_password"
							placeholder="Confirm Password"
							required
						/>
						<span class="toggle-password" onclick="togglePasswordVisibility('confirm_password')">
							<img src="/images/eye-slash-icon.png" alt="Toggle password visibility" />
						</span>
					</div>
				</div>
				<div class="input-box button">
					<input type="submit" value="Sign Up" />
				</div>
				<div class="text">
					<h3>Already have an Account? <a href="/login">Login now</a></h3>
				</div>
			</form>
		</div>
	</div>

    <script>
        function togglePasswordVisibility(inputId) {
            const passwordInput = document.getElementById(inputId);
            const toggleIcon = passwordInput.nextElementSibling;
            if (passwordInput.type === "password") {
                passwordInput.type = "text";
                toggleIcon.innerHTML = '<img src="/images/eye-icon.png" alt="Hide password" />';
            } else {
                passwordInput.type = "password";
                toggleIcon.innerHTML = '<img src="/images/eye-slash-icon.png" alt="Show password" />';
            }
        }

        function validateForm() {
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirm_password').value;
			const mobile = document.getElementById('mobile').value;

            if (password !== confirmPassword) {
                alert("Passwords do not match!");
                return false; 
            }

			if (mobile.length !== 10 || isNaN(mobile)) {
				alert("Mobile number must be exactly 10 digits long and contain only numbers!");
				return false;
			}

			return true; 
        }
    </script>
</body>
</html>
